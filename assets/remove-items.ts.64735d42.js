import{g as B,r as v,a as k}from"./chrome-searches-storage.4054d580.js";chrome.runtime.onMessage.addListener(function(e,t,a){!e.message||e.message=="rerun_script_permission"&&(u.takeRecords(),u.disconnect(),g(),u.observe(m,p))});let s,l,f=!1;const S=async()=>{let e=[""];const t=await chrome.storage.sync.get(["blocked"]);return!!t&&t.blocked&&t.blocked.length>0?e=t.blocked:await chrome.storage.sync.set({blocked:[""]}),e};var y;const m=(y=document.getElementById("content"))!=null?y:document.body,p={subtree:!0,childList:!0},u=new MutationObserver(function(e,t){t.takeRecords(),t.disconnect(),g(),t.observe(m,p)});function L(){u.observe(m,p),!!location.href&&!location.href.includes("vinted.")&&u.disconnect()}N();async function g(){const e=await S(),t=n("feed-grid__item"),a=n("horizontal-scroll__item"),d=n("closet__item");i(t),i(d),i(a);function n(o,r){return r?Array.from(r.getElementsByClassName(o)):Array.from(document.getElementsByClassName(o))}function i(o){const r=[];o==null||o.forEach(c=>{b(c)&&r.push(c)}),r.forEach(c=>{c.style.display="none"})}function b(o){const r=n("new-item-box__description",o);if(!r)return;let c;const h=r[r.length-1];return h?c=h.querySelector("h4"):c=o.querySelectorAll('[data-testid$="description-subtitle"]')[0],c?_(c.innerHTML):void 0}function _(o){return(e==null?void 0:e.length)>0?e.includes(o.trim()):!1}}async function w(){if(!!await B()){if(s=m.querySelector('button[data-testid*="catalog-search-save-button"]'),!s)if(s=m.querySelector('button[data-testid*="catalog-search-delete-button"]'),s)f=!0;else return;s.addEventListener("click",E)}}function E(){const e=s==null?void 0:s.getAttribute("data-testid");if(e.includes("delete-button")?f=!0:e.includes("save-button")&&(f=!1),f){v(location.href);return}const t=s;l=document.createElement("form");const a=l;a.style.width="100%",a.style.flex="1",a.style.display="flex",a.style.flexDirection="column",a.style.gap="10px";const d=document.createElement("label");d.style.fontSize="1.5rem",d.htmlFor="input-for-saved-search",d.innerHTML="<b>Geef je zoekopdracht een naam:</b>",l.appendChild(d);const n=document.createElement("input");n.style.fontSize="1.5rem",n.classList.add("web_ui__Card__card"),n.style.minHeight="20px",n.style.padding="8px 12px",n.id="input-for-saved-search",n.placeholder="Bv. kleurrijke vintage blouses",l.appendChild(n);const i=document.createElement("button");i.type="submit",i.innerHTML='<span class="web_ui__Button__label"><span class="web_ui__Button__label" style="color: white;">Voeg toe</span></span>',["web_ui__Button__button","web_ui__Button__filled","web_ui__Button__default","web_ui__Button__primary","web_ui__Button__truncated"].forEach(_=>{i.classList.add(_)}),l.appendChild(i),t.parentNode.style.flexDirection="column",t.parentNode.style.gap="10px",t.parentNode.appendChild(l),l.addEventListener("submit",C)}function C(){const e=document.getElementById("input-for-saved-search"),t=e.value;e.value="",k({description:t,query:location.href}),s.parentNode.removeChild(l)}function N(){w(),L()}
