import{g as B,c as E,a as k}from"./chrome-searches-storage.009552de.js";chrome.runtime.onMessage.addListener(function(n,e,o){!n.message||n.message=="rerun_script_permission"&&(f.takeRecords(),f.disconnect(),b(),f.observe(p,y))});let c,d;const L=async()=>{let n=[""];const e=await chrome.storage.sync.get(["blocked"]);return!!e&&e.blocked&&e.blocked.length>0?n=e.blocked:await chrome.storage.sync.set({blocked:[""]}),n};var v;const p=(v=document.getElementById("content"))!=null?v:document.body,y={subtree:!0,childList:!0},f=new MutationObserver(function(n,e){e.takeRecords(),e.disconnect(),b(),e.observe(p,y)});function S(){f.observe(p,y),!!location.href&&!location.href.includes("vinted.")&&f.disconnect()}I();async function b(){const n=await L(),e=t("feed-grid__item"),o=t("horizontal-scroll__item"),s=t("closet__item");a(e),a(s),a(o);function t(r,i){return i?Array.from(i.getElementsByClassName(r)):Array.from(document.getElementsByClassName(r))}function a(r){const i=[];r==null||r.forEach(l=>{m(l)&&i.push(l)}),i.forEach(l=>{l.style.display="none"})}function m(r){var g;const i=t("new-item-box__description",r);if(!i)return;let l;const h=i[0];if(h){l=(g=h.children)==null?void 0:g[0];const _=h.querySelectorAll("p");_.length&&(l=_[_.length-1])}else l=r.querySelectorAll('[data-testid$="description-subtitle"]')[0];return l?u(l.innerHTML):void 0}function u(r){return(n==null?void 0:n.length)>0?n.includes(r.trim()):!1}}async function w(){var a,m;const n=await B();if(!n||(console.log("shouldReplace",n),c=(a=p.querySelector('button[data-testid*="catalog-search-save-button"]'))!=null?a:p.querySelector('button[data-testid*="catalog-search-delete-button"]'),!c))return;const e=c==null?void 0:c.cloneNode(),o=e,s=document.createElement("div");s.setAttribute("id","save-to-vilter-container"),s.style.display="flex",s.style.flexDirection="column",s.style.gap="10px",o.setAttribute("id","save-to-vilter"),c.parentElement.style.alignItems="flex-start",o.innerHTML=(m=c.innerHTML)==null?void 0:m.replace("Zoekopdracht opslaan","Zoekopdracht opslaan in Vilter"),s.appendChild(o),c.insertAdjacentElement("afterend",s),c.parentNode.style.gap="10px";const t=e;if(t){t.style.borderColor="#F39237",t.style.color="#F39237",t.childNodes.forEach(r=>{r.firstChild.style.color="#F39237"});const u=t.querySelector("svg");u&&(u.style.fill="#F39237")}e.addEventListener("click",C)}async function C(){if(await E(location.href)){alert("Je hebt deze zoekopdracht al opgeslagen.");return}const e=document.getElementById("save-to-vilter");d=document.createElement("form");const o=d;o.style.width="100%",o.style.flex="1",o.style.display="flex",o.style.flexDirection="column",o.style.gap="10px";const s=document.createElement("label");s.style.fontSize="1.5rem",s.htmlFor="input-for-saved-search",s.innerHTML="<b>Geef je zoekopdracht een naam:</b>",d.appendChild(s);const t=document.createElement("input");t.style.fontSize="1.5rem",t.classList.add("web_ui__Card__card"),t.style.minHeight="20px",t.style.padding="8px 12px",t.id="input-for-saved-search",t.autocomplete="off",t.placeholder="Bv. kleurrijke vintage blouses",d.appendChild(t);const a=document.createElement("button");a.type="submit",a.innerHTML='<span class="web_ui__Button__label"><span class="web_ui__Button__label" style="color: white;">Voeg toe</span></span>',["web_ui__Button__button","web_ui__Button__filled","web_ui__Button__default","web_ui__Button__primary","web_ui__Button__truncated"].forEach(u=>{a.classList.add(u)}),d.appendChild(a),e.insertAdjacentElement("afterend",d),d.addEventListener("submit",x)}function x(){const n=document.getElementById("save-to-vilter"),e=document.getElementById("input-for-saved-search"),o=e.value;e.value="",k({description:o,query:location.href}),n.parentNode.removeChild(d)}function I(){S(),b(),w()}export{b as getBlockedItems,L as getBlockedList};
